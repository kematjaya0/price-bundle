{% block money_widget -%}
    
    {%- set prepend = not (money_pattern starts with '{{') -%}
    {%- set append = not (money_pattern ends with '}}') -%}
    {%- if prepend or append -%}
        <div class="input-group{{ group_class|default('') }}">
            {%- if prepend -%}
                <div class="input-group-prepend">
                    <span class="input-group-text">{{ money_pattern|form_encode_currency }}</span>
                </div>
            {%- endif -%}
            {{- block('form_widget_simple') -}}
            {%- if append -%}
                <div class="input-group-append">
                    <span class="input-group-text">{{ money_pattern|form_encode_currency }}</span>
                </div>
            {%- endif -%}
        </div>
    {%- else -%}
        {{- block('form_widget_simple') -}}
    {%- endif -%}
    
    {{- block('price_javascript') -}}
    
{%- endblock money_widget %}

{% block price_javascript %}
    <script type="text/javascript" src="{{ asset('bundles/price/js/jquery.priceFormat.min.js') }}"></script>
    <script>
    
    (function() {
        priceFormat{{ name|capitalize }}();
    })();

    function priceFormat{{ name|capitalize }}() {
        if (!window.jQuery) {  
            alert("JQuery required");
            return;
        }
        
        generateCentNumber();
        $('#{{ id }}').addClass('priceformat');
        $('#{{ id }}').priceFormat({    
            prefix: '{{ prefix }}',
            suffix: '{{ suffix }}',
            centsSeparator: '{{ cent_point() }}',
            thousandsSeparator: '{{ thousand_point() }}',
            centsLimit: parseInt('{{ cent_limit() }}')
        });
    }
    
    function generateCentNumber() {
        let values = $('#{{ id }}').val().split(".");
        let centValue = (typeof values[1] != "undefined") ?  values[1]: "";
        for (let i = centValue.length; i < parseInt('{{ cent_limit() }}'); i++) {
            centValue += "0";
        }
        
        values[1] = centValue;
        $('#{{ id }}').val(values.join());
    }
        
    </script>
{% endblock %}